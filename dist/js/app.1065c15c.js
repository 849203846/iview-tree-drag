(function(e){function t(t){for(var r,l,o=t[0],c=t[1],d=t[2],u=0,h=[];u<o.length;u++)l=o[u],a[l]&&h.push(a[l][0]),a[l]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);s&&s(t);while(h.length)h.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={app:0},i=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var s=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",[n("p",[e._v("选择了："+e._s(e.selected.title))]),n("TreeExtend",{attrs:{getChild:e.getChild},on:{"on-select":e.handlerSelect,"on-drag":e.handlerDrag}})],1),n("div",[n("p",[e._v("拖拽历史")]),e._l(e.dragHis,function(t,r){return n("p",{key:r},[e._v("\n      ID: "+e._s(t.from.id)+"("+e._s(t.from.title)+") ---\x3e> ID: "+e._s(t.to.id)+"("+e._s(t.to.title)+")\n      "),n("strong",[e._v("Position: "+e._s(t.position))])])})],2)])},i=[],l=n("795b"),o=n.n(l),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.search?n("Input",{attrs:{placeholder:"点击查询"}}):e._e(),n("Tree",{attrs:{data:[{title:"",nodeKey:0,loading:!1,children:[]}],"load-data":e.buildChild,render:e.renderContent},on:{"on-select-change":e.handlerTreeSelected,"on-toggle-expand":e.handlerTreeExpand}})],1)},d=[],s=(n("7514"),n("96cf"),n("3b8d")),u="ivu-tree-children",h="tree-hover-",f="before",p="inner",g="after",v=null,b=null,y=null,x={name:"tree-extend",props:{getChild:{type:Function,default:null},search:{type:Boolean,default:!1}},data:function(){return{data:[{title:"",nodeKey:0,loading:!1,children:[]}]}},methods:{handlerTreeSelected:function(e,t){var n=this;t.loading||(t.expand||this.buildChild(t),this.$set(t,"selected",!0),this.$set(t,"expand",!t.expand),e.filter(function(e){return e.node.selected&&e.nodeKey!==t.nodeKey}).map(function(e){n.$set(e.node,"selected",!1)}),this.$emit("on-select",t))},handlerTreeExpand:function(e){e.loading||e.expand&&this.buildChild(e)},buildChild:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(void 0!==t.loading){e.next=11;break}if(!n){e.next=10;break}if(!t.children){e.next=8;break}if(!(t.children.length>0)){e.next=6;break}return t.children.push(n),e.abrupt("return");case 6:e.next=10;break;case 8:return this.$set(t,"children",[n]),e.abrupt("return");case 10:return e.abrupt("return");case 11:return this.$set(t,"loading",!0),e.next=14,this.getChild(t);case 14:if(e.t0=e.sent,e.t0){e.next=17;break}e.t0=[];case 17:r=e.t0,n&&r.push(n),r.length?(this.$set(t,"children",r),this.$set(t,"loading",!1),this.$set(t,"expand",!0)):(this.$delete(t,"children"),this.$delete(t,"loading"));case 20:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),handlerDragstart:function(e,t){var n=t.data,r=e.target;r.style.opacity=".5",v=n},handlerDragOver:function(e,t){var n=t.data;if(v!==n){var r=e.offsetY,a=e.target,i=r/a.offsetHeight;i<=.33?b=f:i>.33&&i<.66?b=p:i>=.66&&(b=g),this.setBorderOffsetElement(a),y=n}else y=null},handlerDragend:function(e,t){var n=t.root,r=(t.node,t.data),a=e.target;if(this.clearBorder(),a.style.opacity="1",y){var i=function(){var e=n.find(function(e){return e.children&&e.children.indexOf(r.nodeKey)>-1}).node,t=e.children.indexOf(r);e.children.splice(t,1)};i();var l=function(e){var t=n.find(function(e){return e.children&&e.children.indexOf(y.nodeKey)>-1}).node,a=t.children.indexOf(y)+(e?0:1);t.children.splice(a,0,r),0===t.children.length&&delete t.children};switch(b){case f:l(!0);break;case g:l(!1);break;case p:this.$set(y,"expand",!0),this.buildChild(y,r);break}this.$emit("on-drag",r,y,b,e),v=null,b=null,y=null}},setBorderOffsetElement:function(e){this.clearBorder();var t=e;while(t.className!==u)t=t.parentElement;t.className="".concat(u," ").concat(h).concat(b)},clearBorder:function(){for(var e=document.querySelectorAll("\n        .".concat(h).concat(f,",\n        .").concat(h).concat(p,",\n        .").concat(h).concat(g,"\n      ")),t=0;t<e.length;t++)e[t].className=u},renderContent:function(e,t){var n=this,r=t.root,a=t.data,i=this.handlerDragstart,l=this.handlerDragOver,o=this.handlerDragend;return 1===r.length&&this.handlerTreeSelected(r,a),0===a.nodeKey?null:e("span",{attrs:{draggable:"true"},on:{dragstart:function(e){return i(e,t)},dragover:function(e){return l(e,t)},dragend:function(e){return o(e,t)},click:function(){return n.handlerTreeSelected(r,a)}},class:{"ivu-tree-title":!0,"ivu-tree-title-selected":a.selected}},[e("Icon",{attrs:{type:a.icon,size:"18"}}),a.title])}}},m=x,_=(n("792b"),n("2877")),O=Object(_["a"])(m,c,d,!1,null,null,null),w=O.exports,$=w,k={name:"app",components:{TreeExtend:$},data:function(){return{split:.5,selected:{},dragHis:[]}},methods:{getChild:function(e){return new o.a(function(t,n){setTimeout(function(){for(var n=[],r=0;r<10;r++){var a={title:"测试节点".concat(e.nodeKey,"-").concat(r),id:"".concat(e.nodeKey).concat(r),loading:!1,children:[]};r>=5&&(delete a.loading,delete a.children),n.push(a)}t(n)},1e3)})},handlerSelect:function(e){this.selected=e},handlerDrag:function(e,t,n,r){this.dragHis.push({from:e,to:t,position:n,e:r})}}},C=k,S=(n("7c55"),Object(_["a"])(C,a,i,!1,null,null,null)),T=S.exports,j=n("e069"),D=n.n(j);n("dcad");r["default"].use(D.a),new r["default"]({render:function(e){return e(T)}}).$mount("#app")},"5c48":function(e,t,n){},"792b":function(e,t,n){"use strict";var r=n("ab07"),a=n.n(r);a.a},"7c55":function(e,t,n){"use strict";var r=n("5c48"),a=n.n(r);a.a},ab07:function(e,t,n){}});
//# sourceMappingURL=app.1065c15c.js.map